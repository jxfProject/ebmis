#override("title")
SpringWind - 农产品管理
#end
#override("css")
<link href="#springUrl('/static/css/plugins/bootstrap-table/bootstrap-table.min.css')" rel="stylesheet">
#end
#override("breadcrumb")
<li><a>资源管理</a></li><li class="active"><strong>农产品管理</strong></li>
#end
#override("content")
<div class="row">
	<div class="ibox-content text-right form-inline" style="background: #F3F3F4;">
	<div class="input-group">			
			<span class="input-group-cbx">
				<input name="unchecked" id="unchecked" type="checkbox" value="0" checked="checked" onclick="selectCheck()">
				<Strong>未复核</Strong>
			</span>
		</div>
		&nbsp;&nbsp;
		<div class="input-group">			
			<span class="input-group-cbx">
				<input name="checked" id="checked" type="checkbox" value="1" onclick="selectCheck()">
				<Strong>已复核</Strong>
			</span>
			<span style="padding-left:200px">&nbsp;
			</span>
		</div>
		<div class="input-group" style="padding-right:30px">			
			<select id="select1" class="form-control">
		      <option value="请选择">请选择</option>
		      <option value="生鲜">生鲜</option>
		      <option value="非生鲜">非生鲜</option>
		    </select>
		</div>
		<div class="input-group" style="padding-right:30px">			
			<select id="select2" class="form-control">
		      <option>请选择</option>
		    </select>
		</div>
		<div class="input-group" style="padding-right:30px">			
			<select id="select3" class="form-control">
		      <option>请选择</option>
		    </select>
		</div>
		<div class="input-group" style="padding-right:80px">			
			<select id="select4" class="form-control">
		      <option>请选择</option>
		    </select>
		</div>
		
		<div class="input-group">
			<input type="text" class="form-control">
			<span class="input-group-btn">
				<button type="button" class="btn btn-info">搜索</button>
			</span>
		</div>
		
	</div>
</div>

<div class="row">
    <div class="col-sm-12">
        <table id="dataTable"></table>
    </div>
</div>
#end
#override("js")
<script src="#springUrl('/static/js/plugins/bootstrap-table/bootstrap-table.min.js')"></script>
<script src="#springUrl('/static/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js')"></script>
<script src="#springUrl('/static/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js')"></script>
<script src="#springUrl('/static/plugins/layer-v2.2/layer/layer.js')"></script>
<script src="#springUrl('/static/js/base_list.js')"></script>
<script src="#springUrl('/static/js/common.js')"></script>
<script type="text/javascript">
    var dataUrl = "#springUrl('/product/getProduct/0')";
    
    var dataColumns = [{
        field: 'productName',
        title: '产品名称'
    }, {
        field: 'productURL',
        title: '产品链接',
        formatter: function (value, row, index) {
        	var url = row.productURL;
        	
        	if(typeof url == "undefined"){
        		
        		return "-";
        	}else{
        		
        		return '<a href="'+url+'" target="_blank">'+url+'</a>';
        	}
        	
        }
    },{
        field: 'isValid',
        title: '是否农产品',
        formatter: function (value, row, index) {
            var isValid = row.isValid;
            var id = row.productInnerId;
            if(isValid==1){
            	return '<input name="checkbox" type="checkbox" value="'+isValid+'" checked="checked" onclick="audit('+id+',0)">';
            }else{
            	return '<input name="checkbox" type="checkbox" value="'+isValid+'" onclick="audit('+id+',1)">';
            }
          
        }
    }, {
        field: 'checked',
        title: '是否校验',
        formatter: function (value, row, index) {
            var checked = row.checked;
           if(checked==1){
            	return '<span style="color:#00F">已复核</span>';
            }else{
            	return '<span style="color:#F00">未复核</span>';
            }
        }
    }, {
        title: '操作',
        formatter: function (value, row, index) {
            var id = row.productInnerId;
            var isValid = row.isValid;
           
            return '<a class="btn btn-xs btn-warning" onclick="audit(' + "'" + id + "','" +isValid+"'"+ ')"><i class="fa fa-pencil"></i>复核</a> ';
           
        }
    }
    ];
    function dataQueryParams(params) {
        return {
            _size: params.limit,  //页面大小
            _index: params.offset, //页码
        };
    }



	$("#select1").change(function(){
		var levelName2=$("#select1").val();
		if(levelName2=="生鲜"){
			$("#select2").html("");
			$("#select2").append('<option value="请选择">请选择</option><option value="水果">水果</option><option value="水产">水产</option><option value="蔬菜">蔬菜</option><option value="肉">肉</option>');
		}else if(levelName2=="非生鲜"){
			$("#select2").html("");
			$("#select2").append('<option value="请选择">请选择</option><option value="茶叶及饮品">茶叶及饮品</option><option value="干山货">干山货</option><option value="火锅底料">火锅底料</option><option value="粮油及其制成品">粮油及其制成品</option><option value="佐餐调味">佐餐调味</option><option value="休闲食品">休闲食品</option><option value="腌腊食品">腌腊食品</option>');
		}else{
			$("#select2").html("");
			$("#select3").html("");
			$("#select4").html("");
		}
	});
	$("#select2").change(function(){
		var levelName3=$("#select2").val();
		if(levelName3=="水果"){
			$("#select3").html("");
			$("#select3").append('<option value="请选择">请选择</option><option value="葡萄">葡萄</option><option value="橙子">橙子</option><option value="梨子">梨子</option><option value="海螺">海螺</option>');
		}else if(levelName3=="水产"){
			$("#select3").html("");
			$("#select3").append('<option value="请选择">请选择</option><option value="鱼">鱼</option><option value="龙虾">龙虾</option><option value="泥鳅">泥鳅</option><option value="螃蟹">螃蟹</option>');
		}else if(levelName3=="蔬菜"){
			$("#select3").html("");
			$("#select3").append('<option value="请选择">请选择</option><option value="空心菜">空心菜</option><option value="实心菜">实心菜</option>');
		}else if(levelName3=="肉"){
			$("#select3").html("");
			$("#select3").append('<option value="请选择">请选择</option><option value="猪肉">猪肉</option><option value="牛肉">牛肉</option><option value="羊肉">羊肉</option><option value="鸡肉">鸡肉</option>');
		}else if(levelName3=="花生"){
			$("#select3").html("");
			$("#select3").append('<option value="请选择">请选择</option><option value="好吃的花生">好吃的花生</option>');
		}else{
			$("#select3").html("");
			$("#select4").html("");
		}
	});
	$("#select3").change(function(){
		var levelName4=$("#select3").val();
		if(levelName4=="葡萄"){
			$("#select4").html("");
			$("#select4").append('<option value="请选择">请选择</option><option value="巨峰葡萄">巨峰葡萄</option><option value="玫瑰葡萄">玫瑰葡萄</option><option value="马奶葡萄">马奶葡萄</option>');
		}else if(levelName4=="鲢鱼"){
			$("#select4").html("");
			$("#select4").append('<option value="请选择">请选择</option><option value="大鲢鱼">大鲢鱼</option><option value="小鲢鱼">小鲢鱼</option>');
		}else if(levelName4=="小鱼"){
			$("#select4").html("");
			$("#select4").append('<option value="请选择">请选择</option><option value="小小鱼">小小鱼</option>');
		}else if(levelName4=="大虾"){
			$("#select4").html("");
			$("#select4").append('<option value="请选择">请选择</option><option value="龙虾">龙虾</option><option value="红虾">红虾</option>');
		}else if(levelName4=="小虾"){
			$("#select4").html("");
			$("#select4").append('<option value="请选择">请选择</option><option value="小小虾">小小虾</option>');
		}else{
			$("#select4").html("");
		}
	});
	
	/* $.ajax({
        type: "POST",
        url: "#springUrl('/product/auditProduct/')" + id+':'+flag,
        datatype: "text",
        success: function (data) {
            if(data == 'true'){
                $('#dataTable').bootstrapTable('refresh',{url:dataUrl});
            }
        }
    }); */


function selectCheck(){
	
	if($("#unchecked").is(":checked")&&!$("#checked").is(":checked")){
		var dataUrl="#springUrl('/product/getProduct/0')";
		$('#dataTable').bootstrapTable('refresh',{url:dataUrl});
	}
	else if(!$("#unchecked").is(":checked")&&$("#checked").is(":checked")){
		var dataUrl="#springUrl('/product/getProduct/1')";
		$('#dataTable').bootstrapTable('refresh',{url:dataUrl});
	}
	else{
		var dataUrl="#springUrl('/product/getProductList')";
		$('#dataTable').bootstrapTable('refresh',{url:dataUrl});
	}	
		
}

</script>
#end
#extends("/common/framework.html")
