#override("title")
SpringWind - 项目管理
#end
#override("css")
<link href="#springUrl('/static/css/plugins/bootstrap-table/bootstrap-table.min.css')" rel="stylesheet">
#end
#override("breadcrumb")
<li><a>农电商数据报表</a></li><li><a>店铺数据</a></li><li class="active"><a>重庆本土网店清单</a></li>
#end
#override("content")
<button type="button" class="btn btn-primary pull-right" onClick="OutExcel()">导出Excel</button>
<div class="col-sm-1 pull-right" style="padding-right:0px">
	<form id="formExcel">
		<input type="hidden" id="currentIndex" name="_index">
		<input type="hidden" id="currentSize" name="_size">
		<input type="hidden" id="platName" name="platName" value="重庆本土售卖农产品的店铺基本信息">
		<select id="ExcelValue" name="ExcelValue" class="form-control">
				<option value="1">当前页</option>
				<option value="2">全部</option>
		</select>
	</form>
</div>
<div class="row">
    <div class="col-sm-12">
    	<h3 class="text-center" style="margin-top: 30px">重庆本土售卖农产品的店铺基本信息</h3>
        <table id="dataTable"></table>
    </div>
</div>
#end
#override("js")
<script src="#springUrl('/static/js/plugins/bootstrap-table/bootstrap-table.min.js')"></script>
<script src="#springUrl('/static/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js')"></script>
<script src="#springUrl('/static/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js')"></script>
<script src="#springUrl('/static/plugins/layer-v2.2/layer/layer.js')"></script>
<script src="#springUrl('/static/js/base_list.js')"></script>
<script src="#springUrl('/static/js/common.js')"></script>
<script type="text/javascript">
   	var dataUrl = "#springUrl('/allReport/CQLocalStoreReport.html')";
    var dataColumns = [{
        field: 'storeinnerid',
        title: '店铺编号'
    },{
        field: 'storeactualid',
        title: '店铺实际ID'
    }, {
        field: 'storeURL',
        title: '链接'
    }, {
        field: 'stor_platform',
        title: '平台'
    }, {
        field: 'storeName',
        title: '名称'
    },{
        field: 'companyName',
        title: '公司'
    },{
        field: 'store_salse',
        title: '销售额',
        formatter:function (value, row, index) {
            if(value.indexOf("E",0)!=-1){
            	var valueIndex=value.indexOf("E",0);
            	var valueStr=value.substring(0,valueIndex);
            	var indexNum=1;
            	for(var i=0;i<valueIndex-2;i++){
            		indexNum*=10;
            	}
            	var valueNum=parseInt(indexNum*valueStr).toString();
            	if(valueNum.length>8){
            		var valueStr=value.substring(valueIndex+1,valueIndex+2);
            		if(valueStr>7){
            			valueNum=valueNum.substring(0,9)+"."+valueNum.substring(9,valueNum.length);
            		}else{
            			valueNum=valueNum.substring(0,8)+"."+valueNum.substring(8,valueNum.length);
            		}
            	}else{
            		valueNum+=".0";
            	}
            return '<span>'+valueNum+'</span>';
            }
            return value;
            }
    },{
        field: 'counts',
        title: '销量'
    },{
        field: 'sku',
        title: 'SKU'
    }];
    function dataQueryParams(params) {
    	$("#currentIndex").val(params.offset);
    	$("#currentSize").val(params.limit);
        return {
            _size: params.limit,  //页面大小
            _index: params.offset, //页码
        };
    }
    function OutExcel(){
    	$.ajax({
        	url: "#springUrl('/outExcel/CQLocalStoreExcel')",
            data: $("#formExcel").serialize(),
            type: "POST",
            success: function(data){
            	var d = JSON.parse(data);
            	var info=d.data;
            	layer.alert(info, {
        			  skin: 'layui-layer-molv',
        			  closeBtn: 0
        			});
            }
    	});
    }

</script>
#end
#extends("/common/framework.html")
<script type="text/javascript">
$("#first").removeClass();
$("#third").addClass("active");
$("#thirdLevel4").addClass("active");
</script>
